<!doctype html>
<html>
  <head>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">

    {#  variables from app.js res.render
        title           = String
        use_cdn         = Boolean
        image_dir       = String
        database_result = Object
        image_count     = Number
    #}

    <title>{{ title }}</title>

    {# css #}
    <link rel="stylesheet" type="text/css" href="/css/style.css" />

    {# jquery scripts #}
    {% if use_cdn %}
    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    {% else %}
    <script src="js/cdn_locals/jquery.js"></script>
    <script src="js/cdn_locals/jquery.form.min.js"></script>
    <script src="js/cdn_locals/jquery-ui.min.js"></script>
    {% endif %}

    {# touch supports (must follow jquery) #}
    {% if use_cdn %}
    <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
    {% else %}
    <script src="js/cdn_locals/jquery.ui.touch-punch.js"></script>
    {% endif %}

    {# https://github.com/benmajor/jQuery-Touch-Events #}
    <script type="text/javascript" src="js/jquery.mobile-events.min.js"></script>

    {# resize and rotate #}
    {% if use_cdn %}
    <script src="//cdn.jsdelivr.net/interact.js/1.2.6/interact.min.js"></script>
    {% else %}
    <script src="js/cdn_locals/interact.min.js"></script>
    {% endif %}

    {# socket io #}
    {% if use_cdn %}
    <script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
    {% else %}
    <script src="js/cdn_locals/socket.io-1.3.7.js"></script>
    {% endif %}

    {# bookmark icon link #}
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />

  </head>

  <body>
    <div id='wrapper'>
      <div id="images">
        {% for i in range(0, image_count) -%}
        <img  title={{database_result[i].filename}}
              src='{{image_dir}}{{database_result[i].filename}}'
              id={{database_result[i].dom_id}}
              class='drawing'
              style='z-index: {{database_result[i].z_index}};
                         top: {{database_result[i].postop}};
                        left: {{database_result[i].posleft}};
                       width: {{database_result[i].width}};
                      height: {{database_result[i].height}};
                   transform: {{database_result[i].transform}};
                     opacity: {{database_result[i].opacity}};
              -webkit-filter: {{database_result[i].filter}};'
              data-scale='{{database_result[i].scale}}'
              data-angle='{{database_result[i].angle}}'
              data-rotateX='{{database_result[i].rotateX}}'
              data-rotateY='{{database_result[i].rotateY}}'
              data-rotateZ='{{database_result[i].rotateZ}}'>
        {%- endfor %}
      </div>

      {# main button #}
      <div id='navigation_toggle_button_container'>
        <button id='navigation_toggle_button'>
          <div id='line_one'>
          </div>
          <div id='line_two'>
          </div>
          <div id='line_three'>
          </div>
        </button>
      </div>

      {# containers #}
      <div id='navigation_container'>
        <div id='dragger_switches_button' class='button navigation_button'> draggers
          <img class='icon_image' src='/images/draggers_icon.png'>
        </div>

        <div id='tools_container_button' class='button navigation_button'> tools
          <img class='icon_image' src='/images/tools.png'>
        </div>

        <form id='upload_image_button' name='title' method='post'
              enctype='multipart/form-data'
              action='addfile/' runat='server'>
          <div class='btn-file button navigation_button'> upload
            <img class='icon_image' src='/images/camera_upload.png'>
            <input id='fileselect' type='file' name='client_id_goes_here'>
          </div>
        </form>
        <div id='exit_door' class='button navigation_button'> remove
          <img class='icon_image' src='/images/exit_door.png'>
        </div>
        <div id='rightbutton' class='button_no_show'></div>

      </div>

      <div id='tools_container'>
        <div id='debug_button' class='button tools_button'> info is off </div>
        <div id='reset_page_button' class='button tools_button'> reset page </div>
        <div id='nothing1' class='button_no_show'>  </div>
        <div id='nothing2' class='button_no_show'>  </div>
        <div id='nothing3' class='button_no_show'>  </div>
      </div>

      <div id='upload_preview_container' class='rainbow_border'>
        <img id='image_upload_preview' src='/images/1x1.png'/>
        <div id='confirm_or_reject_container'>
          <div id='confirm_upload_button' class='confirm_button confirm_yes'> Confirm Upload </div>
          <div id='reject_upload_button' class='confirm_button confirm_no'> Cancel </div>
        </div>
        <div id='confirm_or_reject_container_info'> </div>
      </div>

      <div id='delete_preview_container' class='rainbow_border'>
        <img id='delete_preview' src='/images/1x1.png'/>
        <div id='delete_confirm_or_reject_container'>
          <div id='confirm_delete_button' class='confirm_button confirm_yes'> Confirm Delete </div>
          <div id='reject_delete_button' class='confirm_button confirm_no'> Cancel </div>
        </div>
        <div id='delete_confirm_or_reject_container_info'></div>
      </div>

      {# dragger switches #}
      <div id='dragger_switches_container'>
        <div id='dragger_all_switch' class='dragger_all_switch'><span> -All- </span></div>
        <div id='stretch_dragger_switch' class='dragger_switch'><span> Stretch </span></div>
        <div id='rotation_dragger_switch' class='dragger_switch'><span> Rotate </span></div>
        <div id='opacity_dragger_switch' class='dragger_switch'><span> Opacity </span></div>
        <div id='blur_brightness_dragger_switch' class='dragger_switch'><span> Blur <br> Brightness </span></div>
        <div id='contrast_saturate_dragger_switch' class='dragger_switch'><span> Contrast <br> Saturation </span></div>
        <div id='grayscale_invert_dragger_switch' class='dragger_switch'><span> Grayscale <br> Inversion </span></div>
        <div id='threeD_dragger_switch' class='dragger_switch'><span> 3D </span></div>
        <div id='party_dragger_switch' class='dragger_switch'><span> Party </span></div>
      </div>

      {# draggers #}
      <div id='stretch_dragger' class='dragger dragger_transitions'> S </div>
      <div id='rotation_dragger' class='dragger dragger_transitions'> R </div>
      <div id='opacity_dragger' class='dragger dragger_transitions'> O </div>
      <div id='blur_brightness_dragger' class='dragger dragger_transitions'> B </div>
      <div id='contrast_saturate_dragger' class='dragger dragger_transitions'> C </div>
      <div id='grayscale_invert_dragger' class='dragger dragger_transitions'> G </div>
      <div id='threeD_dragger' class='dragger dragger_transitions'> 3D </div>
      <div id='party_dragger' class='dragger dragger_transitions'> P </div>

    </div> {# wrapper #}

    {# main script #}
    <script src="js/main.js"></script>

  </body>
</html>
