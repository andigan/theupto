<!doctype html>
<html>
  <head>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <title>{{ title }}</title>

    {# stylesheets #}
    {# link "relation" to the document, href: hypertext reference #}
    {# rel/relation is an html attribute #}
    {# css rules are overwritten by links that follow #}
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />

    {% set use_cdn = {{config.use_cdn}} %}

    {# jquery scripts #}
    {% if use_cdn %}
    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
    {% else %}
    <script src="javascripts/cdn_locals/jquery.js"></script>
    <script src="javascripts/cdn_locals/jquery.form.min.js"></script>
    <script src="javascripts/cdn_locals/jquery-ui.min.js"></script>
    {% endif %}

    {# touch supports (must follow jquery) #}
    {% if use_cdn %}
    <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>
    {% else %}
    <script src="javascripts/cdn_locals/jquery.ui.touch-punch.js"></script>
    {% endif %}

    {# https://github.com/benmajor/jQuery-Touch-Events #}
    <script type="text/javascript" src="javascripts/jquery.mobile-events.min.js"></script>

    {# resize and rotate #}
    {% if use_cdn %}
    <script src="//cdn.jsdelivr.net/interact.js/1.2.6/interact.min.js"></script>
    {% else %}
    <script src="javascripts/cdn_locals/interact.min.js"></script>
    {% endif %}

    {# socket io #}
    {% if use_cdn %}
    <script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
    {% else %}
    <script src="javascripts/cdn_locals/socket.io-1.3.7.js"></script>
    {% endif %}

    {# bookmark icon link #}
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />

  </head>

  {#  accepting from app.js res.render
      title :         'Whatadrag'
      data_from_database.idtags[]
                        .domtags[]
                        .filenames[]
                        .widths[]
                        .heights[]
                        .posleft[]
                        .postop[]
                        .opacities[]
                        .z_indexs[]
      config            .port
                        .slashimagedirslash
  #}

  <body>
    <div id='wrapper'>
      <div id="images">

        {# for each filename in data_from_database
           assign the title to the filename
           id will be domtag, but could have been loop.index0
           place the file in the dom using
           top, left, width, height, z-index
           loop.index0 is a variable from nunjucks
         #}

        {% for filename in data_from_database.filenames %}
        <img  title={{filename}}
              id={{data_from_database.domtags[loop.index0]}}
              class = 'resize-drag drawing'
              style='z-index: {{data_from_database.z_indexs[loop.index0]}};
                         top: {{data_from_database.postop[loop.index0]}};
                        left: {{data_from_database.posleft[loop.index0]}};
                       width: {{data_from_database.widths[loop.index0]}};
                      height: {{data_from_database.heights[loop.index0]}};
                   transform: {{data_from_database.matrixes[loop.index0]}};
                     opacity: {{data_from_database.opacities[loop.index0]}};
              -webkit-filter: {{data_from_database.filters[loop.index0]}};'
                  data-scale='{{data_from_database.scales[loop.index0]}}'
                  data-angle='{{data_from_database.angles[loop.index0]}}'
                         src='{{config.slashimagedirslash}}{{filename}}'>
        {% endfor %}

      </div> {# end of images div #}

      {# toolbox: main settings #}
      <nav id="toolbox-container" class="toolbox_container">
        <div class='col_1'>
          <div class='row_1'>
            <div id='mc1r1'></div>
          </div>
          <div class='row_2'>
            <div id='mc1r2'></div>
          </div>
          <div class='row_3'>
            <div id='mc1r3'></div>
          </div>
        </div>
        <div class='col_2'>
          <div id='mc2r0'>
            <div class='row_1'>
              <div id='mc2r1'></div>
            </div>
            <div class='row_2'>
              <div id='mc2r2'></div>
            </div>
          </div>
        </div>
        <div class='col_3'>
          <div class='row_1'>
            <div id='mc3r1'></div>
          </div>
          <div class='row_2'>
            <div id='mc3r2'></div>
          </div>
          <div class='row_3'>
            <div id='mc3r3'></div>
          </div>
        </div>
      </nav>
      {# toolbox2: system settings #}
      <nav id="toolbox2-container" class="toolbox_container">
        <div class='col_1'>
          <div class='row_1'>
            <div id='sc1r1'></div>
          </div>
          <div class='row_2'>
            <div id='sc1r2'></div>
          </div>
          <div class='row_3'>
            <div id='sc1r3'></div>
          </div>
        </div>
        <div class='col_2'>
            <div class='row_1'>
              <div id='sc2r1'></div>
            </div>
            <div class='row_2'>
              <div id='sc2r2'></div>
            </div>
            <div class='row_3'>
              <div id='sc2r3'></div>
            </div>
        </div>
        <div class='col_3'>
          <div class='row_1'>
            <div id='mc3r1'></div>
          </div>
          <div class='row_2'>
            <div id='mc3r2'></div>
          </div>
          <div class='row_3'>
            <div id='mc3r3'></div>
          </div>
        </div>
      </nav>
      {# toolbox3: dragger settings #}
      <nav id="toolbox3-container" class="toolbox_container">
        <div class='col_1'>
          <div class='row_1'>
            <div id='dc1r1'></div>
          </div>
          <div class='row_2'>
            <div id='dc1r2'></div>
          </div>
          <div class='row_3'>
            <div id='dc1r3'></div>
          </div>
        </div>
        <div class='col_2'>
            <div class='row_1'>
              <div id='dc2r1'></div>
            </div>
            <div class='row_2'>
              <div id='dc2r2'></div>
            </div>
            <div class='row_3'>
              <div id='dc2r3'></div>
            </div>
        </div>
        <div class='col_3'>
          <div class='row_1'>
            <div id='dc3r1'></div>
          </div>
          <div class='row_2'>
            <div id='dc3r2'></div>
          </div>
          <div class='row_3'>
            <div id='dc3r3'></div>
          </div>
        </div>
      </nav>

<div id='toolbox_toggle_container'>
  <button id='toolbox_toggle_button'>
    <div id='line_one'>
    </div>
    <div id='line_two'>
    </div>
    <div id='line_three'>
    </div>
  </button>
</div>



    </div> {# wrapper #}

    {# main script #}
    <script>
      var resize_dragger_status          = '{{config.resize_dragger_status}}',
        opacity_dragger_status           = '{{config.opacity_dragger_status}}',
        rotation_dragger_status          = '{{config.rotation_dragger_status}}',
        blur_brightness_dragger_status   = '{{config.blur_brightness_dragger_status}}',
        grayscale_invert_dragger_status  = '{{config.grayscale_invert_dragger_status}}',
        contrast_saturate_dragger_status = '{{config.contrast_saturate_dragger_status}}',
        party_dragger_status             = '{{config.party_dragger_status}}',

        image_dir                        = {{config.slashimagedirslash}};
    </script>

    <script src="javascripts/main.js"></script>

  </body>
</html>
